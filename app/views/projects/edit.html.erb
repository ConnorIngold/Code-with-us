<div class="cover">
  <div class="container text-center">
    <div class="form-user">
      <h1>Edit Project</h1>
      <%= simple_form_for(@project) do |f| %>
      <%= f.input :name, placeholder: "Name" %>
      <%= f.input :aim, placeholder: "What's the aim of this project?" %>
      <%= f.input :category, collection: Project::CATEGORIES, prompt: "What is the purpose of this project?" %>
      <div class="div-label">
        <label for="image">Image</label>

        <div class="file_button_container">
          <%= f.input :image, label: false%>
          <%= f.input :image_cache, as: :hidden  %>
        </div>
      </div>
    </div>

  <div class="form-group">
    <label class="control-label check_boxes optional">Technologies</label>
    <div class="technology-choices">
      <% @technologies.each do |technology| %>
        <input type="checkbox" class="hidden" value="<%= technology.id %>" name="project[technology_ids][]" id="project_technology_ids_<%= technology.id %>">
        <label for="project_technology_ids_<%= technology.id %>" disabled='true' class="technology-choice <%= @project.technologies.include?(technology) ? 'active' : '' %>">
          <%= technology.name %>
          <i class="fa fa-check"></i>
        </label>
      <% end %>
     </div>
  </div>

    <%= f.submit "Save", class: "btn btn-primary"  %>
    <% end %>
  </div>
</div>


<% @project.project_invites.each do |invite| %>
  <%= invite.user.email %>
  <%= invite.message %>
  <%= invite.status %>
  <%= link_to "accept", accept_path(invite), class: "btn btn-success accept-button" %>
  <%= link_to "decline", decline_path(invite),  class: "btn btn-danger decline" %>
<% end %>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
<script>
  $(document).ready(function(){
    $(".technology-choice").each(function() {
        console.log($(this).prev('input'))
      if ($(this).hasClass('active')) {
        $(this).prev('input').attr('checked', true);
      }
    })
    $(".technology-choice").click(function(event){
      event.preventDefault();
      $(this).toggleClass("active");
      if ($(this).hasClass('active')) {
        $(this).prev('input').attr('checked', true);
      } else {
        $(this).prev('input').removeAttr('checked');
      }
    });
  });
</script>


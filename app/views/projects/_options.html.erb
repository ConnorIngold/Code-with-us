<div class="options-list">
  <ul>
    <li>
      <h5>Make this Project open or closed? - Closed project means no one else can join the group</h5>

<!--       <label class="switch">
        <input type="checkbox">
        <span class="slider round"></span>
      </label> -->


      <% if current_user == @project.owner && @project.open === true %>
        <%= link_to "Make this project closed", closed_path(@project) %>
      <% elsif  current_user == @project.owner && @project.open === false%>
        <%= link_to "Make this project open", open_path(@project) %>
      <% end %>

      <hr>

      <h5>Project private or not? - private means no one can see the project page unless invited</h5>
      <% if current_user == @project.owner && @project.private === true %>
        <%= link_to "Make this project public", public_path(@project) %>
      <% elsif current_user == @project.owner && @project.private === false %>
        <%= link_to "Make this project private", private_path(@project) %>
      <% end %>

      <hr>

      <% if @project.owner == current_user || @project.users.merge(ProjectInvite.accepted_users).include?(current_user)%>
      <h5> Send messages to your team</h5>
      <%= link_to "Send a message", new_project_message_path(@project) %>
      <% elsif @project.users.merge(ProjectInvite.pending_users).include?(current_user) %>

        <h3> Invite pending</h3>
      <% elsif @project.users.merge(ProjectInvite.declined_users).include?(current_user) %>

        <h3> Invite declinded</h3>
      <% else %>
      <h5> Send an invite request to the project owner</h5>
        <%= link_to "Request invite", new_project_project_invite_path(@project) %>
      <% end %>

      <% @project.project_invites.each do |invite| %>
        <% unless invite.status == "accepted" %>
        <h5> Recent invite details</h5>
          <%= invite.user.full_name %>
          <%= invite.message %>
          <%= invite.status %>
          <%= link_to "accept", accept_path(invite), class: "btn btn-success accept-button" %>
          <%= link_to "decline", decline_path(invite),  class: "btn btn-danger decline" %>
        <% end %>

        <br>

        <h5> Not happy with the current project?</h5>
         <% if invite.user == current_user && invite.status == "accepted" %>
           <%= link_to "Remove yourself from group", project_invite_path(invite), method: :delete %>
         <% elsif invite.user == current_user %>
           <h5> Invite changes </h5>
           <%= link_to "Edit your invite", edit_project_invite_path(@project,invite) %>
           <%= link_to "Delete request", project_invite_path(invite), method: :delete %>
        <% end %>
      <% end %>

      <hr>

      <div class="list">
        <% if current_user == @project.owner  %>
        <h5> Current Project: </h5>
        <p><%= link_to "Edit this project", edit_project_path(@project), class: "btn btn-primary" %></p>
        <p><%= link_to "Delete project", project_path(@project), class: "btn btn-danger", method: :delete %></p>
        <% end %>
      </div>

    </li>
  </ul>
</div>


 <hr>
 <hr>
 <hr>
 <hr>



        <% if @project.owner == current_user || @project.users.merge(ProjectInvite.accepted_users).include?(current_user)%>
        <%= link_to "Send a message", new_project_message_path(@project) %>
        <% elsif @project.users.merge(ProjectInvite.pending_users).include?(current_user) %>
          <h3> Invite pending</h3>
        <% elsif @project.users.merge(ProjectInvite.declined_users).include?(current_user) %>
          <h3> Invite declinded</h3>
        <% else %>
          <%= link_to "Request invite", new_project_project_invite_path(@project) %>
        <% end %>
        <% @project.project_invites.each do |invite| %>
           <% unless invite.status == "accepted" %>
             <%= invite.user.full_name %>
             <%= invite.message %>
           <% end %>
           <br>
           <% if invite.user == current_user && invite.status == "accepted" %>
             <%= link_to "Remove yourself from group", project_invite_path(invite), method: :delete %>
           <% elsif invite.user == current_user %>
             <%= link_to "Edit your invite", edit_project_invite_path(@project,invite) %>
             <%= link_to "Delete request", project_invite_path(invite), method: :delete %>
          <% end %>
        <% end %>


<br>

<% @project.users.merge(ProjectInvite.accepted_users).each do |user| %>
    <% user.project_invites.each do |invite| %>
      <% if @project.project_invites.include?(invite) %>
      <p>Remove users</p>
      <br>
      <%= link_to user.full_name, decline_path(invite) %>
    <% end %>
  <% end %>
<% end %>

